(this["webpackJsonpgraphql-monster-demo"]=this["webpackJsonpgraphql-monster-demo"]||[]).push([[0],{114:function(e,n,t){},148:function(e,n,t){},155:function(e,n,t){},161:function(e,n,t){},162:function(e,n,t){},163:function(e,n,t){},183:function(e,n,t){},184:function(e,n,t){},185:function(e,n,t){},188:function(e,n,t){"use strict";t.r(n);var i,a=t(0),r=t.n(a),s=t(37),l=t.n(s),c=(t(148),t(22)),d=t(28),o=t(97),m={user:function(){var e,n=localStorage.getItem("user.token");if(n)return{token:n,email:localStorage.getItem("user.email"),id:localStorage.getItem("user.id"),roles:null===(e=localStorage.getItem("user.roles"))||void 0===e?void 0:e.split(",").map((function(e){return{name:e}})),verified:Boolean(localStorage.getItem("user.verified"))}}(),state:"no-user"},u=Object(o.b)({name:"user",initialState:m,reducers:{changeState:function(e,n){e.state=n.payload},login:function(e,n){var t;t=n.payload,localStorage.setItem("user.token",t.token),localStorage.setItem("user.refreshToken",t.refreshToken),localStorage.setItem("user.id",t.user.id),localStorage.setItem("user.email",t.user.email),localStorage.setItem("user.verified",Boolean(t.user.verified).toString()),localStorage.setItem("user.roles",t.user.roles.map((function(e){return e.name})).toString()),e.user={id:n.payload.user.id,token:n.payload.token,email:n.payload.user.email,roles:n.payload.user.roles,verified:Boolean(n.payload.user.verified)}},logout:function(e){localStorage.removeItem("user.refreshToken"),localStorage.removeItem("user.token"),localStorage.removeItem("user.id"),localStorage.removeItem("user.verified"),localStorage.removeItem("user.roles"),delete e.user}}}),v=function(e){return e.user.user},b=u.actions,j=b.login,k=b.logout,h=b.changeState,p=u.reducer,O=t(17),g=t(13),f=t(1),x=function(e){e.user;var n=e.onLogout;return Object(f.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"col-md-2",children:[Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(f.jsx)(O.a.Menu,{children:Object(f.jsx)(O.a.Item,{href:"/",children:"Home"})})]}),Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Admin"}),Object(f.jsxs)(O.a.Menu,{children:[Object(f.jsx)(O.a.Item,{href:"/admin/users",children:"Users"}),Object(f.jsx)(O.a.Item,{href:"/admin/roles",children:"Roles"})]})]})]}),Object(f.jsx)("div",{className:"header-text col-md-8",children:Object(f.jsx)("div",{children:"This Header only for loged user with admin role"})}),Object(f.jsx)("div",{className:"col-md-2",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(f.jsxs)(O.a.Menu,{children:[Object(f.jsx)(O.a.Item,{href:"/",children:Object(f.jsx)(g.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(f.jsx)(O.a.Item,{href:"/",children:Object(f.jsx)(g.b,{className:"",to:"/",onClick:n,children:"Logout"})})]})]})})]})})},N=(t(155),function(){return Object(f.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-md-2",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(f.jsx)(O.a.Menu,{children:Object(f.jsx)(O.a.Item,{href:"/",children:"Home"})})]})}),Object(f.jsx)("div",{className:"header-text col-md-8",children:Object(f.jsx)("div",{children:"This is public Header"})}),Object(f.jsxs)("div",{className:"col-md-2",children:[Object(f.jsx)(g.b,{className:"",to:"/login",children:"Login"})," or ",Object(f.jsx)(g.b,{className:"",to:"/register",children:"Register"})]})]})})}),S=function(e){e.user;var n=e.onLogout;return Object(f.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-md-2",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(f.jsx)(O.a.Menu,{children:Object(f.jsx)(O.a.Item,{children:Object(f.jsx)(g.b,{to:"/",children:"Home"})})})]})}),Object(f.jsx)("div",{className:"header-text col-md-8",children:Object(f.jsx)("div",{children:"This Header only for anybody who is logged in"})}),Object(f.jsx)("div",{className:"col-md-2",children:Object(f.jsxs)(O.a,{children:[Object(f.jsx)(O.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(f.jsxs)(O.a.Menu,{children:[Object(f.jsx)(O.a.Item,{href:"/",children:Object(f.jsx)(g.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(f.jsx)(O.a.Item,{href:"/",children:Object(f.jsx)(g.b,{className:"",to:"/",onClick:n,children:"Logout"})})]})]})})]})})},y=function(){var e=Object(d.c)(v),n=Object(d.b)(),t=function(){n(k())};return e&&e.token?e.roles.find((function(e){return"admin"===e.name}))?Object(f.jsx)(x,{user:e,onLogout:t}):Object(f.jsx)(S,{user:e,onLogout:t}):Object(f.jsx)(N,{})},w=function(e){var n=e.path,t=e.role,i=e.exact,a=e.children,r=Object(d.c)(v);return t&&!(null===r||void 0===r?void 0:r.roles.find((function(e){return e.name===t})))?Object(f.jsx)(c.a,{to:"/login?path=".concat(n,"&role=").concat(t)}):(null===r||void 0===r?void 0:r.token)?Object(f.jsx)(c.b,{path:n,exact:i,children:a}):Object(f.jsx)(c.a,{to:"/login?path=".concat(n)})},D=t(26),F=t(210),T=t(127),I=t(134),U=t(128),V=function(e){var n=e.name,t=e.storedData,i=e.label,s=e.required,l=e.register,c=e.placeholder,d=e.formState,o=e.setValue,m=d.errors,u=m&&m[n];return Object(a.useEffect)((function(){t&&t[n]&&o(n,t[n])}),[t,o,n]),Object(f.jsx)(r.a.Fragment,{children:Object(f.jsxs)(F.a.Group,{controlId:"form-".concat(n),children:[Object(f.jsxs)(F.a.Label,{children:[i," ",s&&"*"]}),Object(f.jsx)(F.a.Control,Object(D.a)(Object(D.a)({type:"text",placeholder:c},l(n,{required:s})),{},{isInvalid:u})),Object(f.jsx)(U.a.Feedback,{type:"valid",children:"Perfect!"}),Object(f.jsxs)(F.a.Control.Feedback,{type:"invalid",children:["Please provide a valid ",i,"."]})]})})},R=t(6),C=t(212),P=t(214),E=function(e){var n=e.what,t=void 0===n?"":n;return Object(f.jsx)("div",{children:"Loading ".concat(t,"... ")})},A=t(203),L=function(e){var n=e.where,t=void 0===n?"":n;return Object(f.jsx)(A.a,{variant:"danger",children:"Unauthorized ".concat(t," access")})},$=function(e){return e[Object.keys(e)[0]]},q=function(e){var n=e.name,t=(e.form,e.id),i=e.renameError,r=e.onUpdated,s=e.updateCache,l=e.query,c=e.children,d=Object(a.useState)("create"!==t?t:void 0),o=Object(R.a)(d,2),m=o[0],u=o[1],v=Object(a.useState)(!1),b=Object(R.a)(v,2),j=b[0],k=b[1],h=Object(a.useState)([]),p=Object(R.a)(h,2),O=p[0],g=p[1],x=Object(a.useState)({}),N=Object(R.a)(x,2),S=N[0],y=N[1],w=function(e){var n=e.message.split("\n");i&&(n=n.map((function(e){return i(e)}))),g(n)},F=function(e){var n=$(e);u(n.id),g(null),r&&r(e)},T=!m,I=Object(C.a)(l.QUERY,{variables:{id:m},skip:T,onCompleted:function(e){!function(e){if(e){var n=$(e);n?y(Object(D.a)({},n)):k(!0)}}(e)},onError:function(e){"GraphQL error: Unauhorized"===e.message&&k(!0)}}).loading,U=Object(P.a)(l.CREATE_MUTATION,{errorPolicy:"none",onCompleted:F,update:s,onError:w}),V=Object(R.a)(U,1)[0],A=Object(P.a)(l.UPDATE_MUTATION,{errorPolicy:"none",onCompleted:F,update:s,onError:w}),q=Object(R.a)(A,1)[0],_=Object(a.useCallback)((function(e){m?(g(null),q({variables:Object(D.a)({id:m},e)})):V({variables:Object(D.a)({userId:localStorage.getItem("user.id")},e)})}),[m,V,q]);return j?Object(f.jsx)(L,{where:"".concat(n," edit")}):I?Object(f.jsx)(E,{what:n}):Object(f.jsx)("div",{children:c(S,_,O)})},_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:102,source:{body:"mutation createUserRole($name: String!) {\r\n  createUserRole(name: $name) {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"updateUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:121,source:{body:"mutation updateUserRole($id: ID!, $name: String!) {\r\n  updateUserRole(id: $id, name: $name) {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},G={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"UserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:76,source:{body:"query userRole($id: ID) {\r\n  UserRole(id: $id) {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},M=function(e){var n=e.storedData,t=e.onSubmit,i=(e.userRoleId,e.graphQlError,Object(I.a)()),a=i.handleSubmit;return Object(f.jsxs)(F.a,{onSubmit:a(t),children:[Object(f.jsx)(V,Object(D.a)({name:"name",label:"Role name",required:!0,storedData:n},i)),Object(f.jsx)(T.a,{type:"submit",children:"Save"})]})},B=function(e){var n=Object(c.i)().id;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(q,{id:n,name:"UserRole",fields:["role"],query:{CREATE_MUTATION:_,UPDATE_MUTATION:Q,QUERY:G},children:function(e,t,i){return Object(f.jsx)(M,{storedData:e,onSubmit:t,graphQlError:i,userRoleId:n})}})})},z=t(32),Y=(t(161),t(205)),H=t(206),K=(t(162),{contains:"contains",not_contains:"not contains",starts_with:"starts with",not_starts_with:"not starts with",ends_with:"ends with",not_ends_with:"not ends with",isEmpty:"is empty"}),W=function(e){var n=e.fields,t=e.onChange,i=Object(a.useState)(n[0]),r=Object(R.a)(i,2),s=r[0],l=r[1],c=Object(a.useState)("contains"),d=Object(R.a)(c,2),o=d[0],m=d[1],u=Object(a.useState)(""),v=Object(R.a)(u,2),b=v[0],j=v[1],k=Object(a.useState)("null"),h=Object(R.a)(k,2),p=h[0],g=h[1],x=Object(a.useCallback)((function(e){p!==e&&(g(e),t(e))}),[p,t,g]),N=Object(a.useCallback)((function(e,n,t){if(t||"isEmpty"===n){var i={};i["".concat(e,"_").concat(n)]=t,x(i)}else x(null)}),[x]),S=function(e){var n=e;return function(){var e;l(e=n),N(e,o,b)}},y=function(e){var n=e;return function(){var e;m(e=n),N(s,e,b)}};return Object(f.jsxs)(Y.a,{className:"mb-3",children:[Object(f.jsx)(H.a,{className:"field-option",as:Y.a.Prepend,variant:"success",title:s,id:"input-group-dropdown-0",children:n.map((function(e){return Object(f.jsx)(O.a.Item,{onClick:S(e),children:e.toString()},e)}))}),Object(f.jsx)(H.a,{className:"select-option",as:Y.a.Prepend,variant:"outline-link",title:K[o],id:"input-group-dropdown-1",children:Object.getOwnPropertyNames(K).map((function(e){return Object(f.jsx)(O.a.Item,{onClick:y(e),children:K[e]},e)}))}),Object(f.jsx)(F.a.Control,{value:b,onChange:function(e){var n=e.target.value;j(n),N(s,o,n)}})]})},J=t(207),Z=t(209),X=function(e){var n=e.show,t=e.onHide,i=e.onDelete,a=e.modelName,r=e.deleteObject,s=e.deleting;return Object(f.jsx)("div",{children:Object(f.jsxs)(Z.a,{show:n,onHide:t,children:[Object(f.jsx)(Z.a.Header,{closeButton:!0,children:Object(f.jsx)("div",{children:Object(f.jsxs)(Z.a.Title,{children:["Delete ",">>"," ",r&&r.name," ","<<"]})})}),Object(f.jsx)(Z.a.Body,{children:s?Object(f.jsxs)("p",{children:["Deleting ",a," item with name '",r&&r.name,"' and id '",r&&r.id,"' ..."]}):Object(f.jsxs)("p",{children:["Are you sure, you want delete ",a," item with name ",Object(f.jsxs)("b",{children:["'",r&&r.name,"'"]})," and id ",Object(f.jsxs)("i",{children:["'",r&&r.id,"'"]})]})}),Object(f.jsxs)(Z.a.Footer,{children:[Object(f.jsx)(T.a,{disabled:s,variant:"danger",type:"submit",onClick:function(){s||i(r)},children:"Delete"}),Object(f.jsx)(T.a,{disabled:s,variant:"primary",onClick:t,children:"Close"})]})]})})},ee=(t(114),function(e){var n=e.item,t=e.field,i=function(e,n){var t=n,i=t.name?t.name.split("."):n.split(".");return{element:e[i[0]],name:i[0],names:i}}(n,t),a=i.element,r=i.name,s=i.names;if(!a)return Object(f.jsxs)(f.Fragment,{children:["ERR NOT EXIST:",r]});if(t.component){var l=t.component;return Object(f.jsx)(f.Fragment,{children:l&&l({value:a,names:s,item:n})})}return a.substr&&a.length>50?Object(f.jsxs)(f.Fragment,{children:[a.substr(0,47),"..."]}):a.push&&a.reduce&&s.length>1?Object(f.jsx)(f.Fragment,{children:a.reduce((function(e,n){return e+n[s[1]]}),"")}):Object(f.jsx)(f.Fragment,{children:a})}),ne=function(e){var n=e.item,t=e.onDelete,i=e.name,s=e.fields,l=void 0===s?["id"]:s,c=e.showDelete,d=void 0!==c&&c,o=e.onEdit,m=e.getEditLink,u=Object(a.useCallback)((function(){o&&o(n)}),[n,o]),v=Object(a.useMemo)((function(){return m?m(n):"/user/".concat(i.toLowerCase(),"/").concat(n.id)}),[i,n,m]);return Object(f.jsx)(r.a.Fragment,{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"id",children:o?Object(f.jsx)("span",{role:"link",tabIndex:0,onKeyPress:function(){},onClick:u,children:n.id}):Object(f.jsx)(g.b,{to:v,children:n.id})}),l.map((function(e){return"id"!==e&&Object(f.jsx)("td",{children:Object(f.jsx)(ee,{item:n,field:e})})})),n.user&&Object(f.jsx)("td",{children:n.user.email}),d&&Object(f.jsx)("td",{className:"right",children:Object(f.jsx)(T.a,{variant:"danger",size:"sm",onClick:function(){t(n)},children:"delete"})})]})})},te=function(e){var n=e.filter,t=e.name,i=e.adminMode,r=void 0!==i&&i,s=e.queries,l=e.fields,c=e.onEdit,d=e.getEditLink,o=Object(a.useState)(!1),m=Object(R.a)(o,2),u=m[0],v=m[1],b=Object(a.useState)(null),j=Object(R.a)(b,2),k=j[0],h=j[1],p=Object(a.useState)(!1),O=Object(R.a)(p,2),g=O[0],x=O[1],N=Object(a.useState)(!1),S=Object(R.a)(N,2),y=S[0],w=S[1],D=Object(a.useState)([]),F=Object(R.a)(D,2),T=F[0],I=F[1],U=Object(a.useState)(),V=Object(R.a)(U,2),A=V[0],$=V[1],q=Object(C.a)(r?s.ADMIN_LIST_QUERY:s.USER_LIST_QUERY,{onError:function(e){"GraphQL error: Unauhorized"===e.message?v(!0):$(e)},onCompleted:function(e){var n=Object.getOwnPropertyNames(e);n.length>0&&e[n[0]].length>0?I(e[n[0]]):I([])},variables:{filter:n}}),_=q.refetch,Q=q.loading,G=Object(P.a)(s.DELETE_MUTATION,{errorPolicy:"none",onCompleted:function(e){B(),_()},onError:function(e){"GraphQL error: Unauhorized"===e.message&&v(!0)}}),M=Object(R.a)(G,1)[0],B=function(){x(!1),h(null)},z=function(e){w(!1),x(!0),h(e)};return u?Object(f.jsx)(L,{where:t}):Q?Object(f.jsx)(E,{what:t}):Object(f.jsxs)("div",{children:[A&&Object(f.jsx)("div",{children:"Error! ".concat(A.message)}),Object(f.jsxs)(J.a,{responsive:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Id"}),null===l||void 0===l?void 0:l.map((function(e){return"id"!==e&&Object(f.jsx)("th",{children:e.name?e.name:e})})),r&&Object(f.jsx)("th",{children:"User"}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:T.length&&T.map((function(e){return Object(f.jsx)(ne,{name:t,item:e,onDelete:z,fields:l,showDelete:r,onEdit:c,getEditLink:d})}))})]}),Object(f.jsx)(X,{show:g,onHide:B,onDelete:function(e){w(!0),M({variables:{id:e.id}})},modelName:t,deleteObject:k,deleting:y})]})},ie=function(){var e=[];return e.name="AND",{AND:e}},ae=function(e,n){var t=n;"AND"!==e.name&&((t=[t]).name="AND"),e.push(t)},re=function e(n){var t,i="",a=Object(z.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.name&&r.length>0?i+=",".concat(e(r)):i+=",{".concat(r.filter,"}")}}catch(s){a.e(s)}finally{a.f()}return"{".concat(n.name,":[").concat(i.substr(1),"]}")},se=function(e){var n={filter:"",params:""};return n.filter=e.AND.length>0?"(filter: ".concat(re(e.AND),")"):"",n.params=n.params.length>2?"(".concat(n.params.substr(1),")"):"",n},le=function(e){var n=e.name,t=e.userId,i=e.adminMode,r=void 0!==i&&i,s=e.queries,l=e.fields,d=e.filter,o=e.onCreate,m=e.onEdit,u=e.getEditLink,v=Object(a.useState)(r?ie():null),b=Object(R.a)(v,2),j=b[0],k=b[1],h=Object(c.g)(),p=Object(a.useCallback)((function(e){var n=ie();return e&&ae(n.AND,{user_every:{id:e}}),d&&ae(n.AND,d),n}),[d]),O=function(e){var n=se(e);console.log("processFilter",{filter:e,filterDestructed:n}),k(e)};Object(a.useEffect)((function(){var e=p(t);O(e)}),[t,p]);var g=Object(a.useCallback)((function(e){var n=p(t);e&&ae(n.AND,e),O(n)}),[t,p]);return r||j?Object(f.jsx)("div",{className:"base-filtered-list",children:Object(f.jsxs)("section",{children:[Object(f.jsx)("h1",{children:n}),Object(f.jsxs)("div",{className:"row-head",children:[Object(f.jsx)(W,{fields:l,onChange:g}),Object(f.jsx)("div",{})]}),Object(f.jsxs)("div",{className:"row-table",children:[Object(f.jsx)(te,{name:n,filter:j,queries:s,adminMode:r,fields:l,onEdit:m,getEditLink:u}),Object(f.jsx)(T.a,{onClick:function(){o?o():h.push("/user/"+n.toLowerCase()+"/create")},children:"Create New"})]})]})}):null},ce={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserRoleFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:106,source:{body:"query allUserRole($filter: UserRoleFilter) {\r\n  allUserRole(filter: $filter) {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},de={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserRoleFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:106,source:{body:"query allUserRole($filter: UserRoleFilter) {\r\n  allUserRole(filter: $filter) {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeUserRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeUserRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:82,source:{body:"mutation removeUserRole($id: ID!) {\r\n  removeUserRole(id: $id) {\r\n    id\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},me=function(e){var n=e.userId,t=e.adminMode,i=void 0!==t&&t;return Object(f.jsx)("div",{children:Object(f.jsx)(le,{name:"Roles",fields:["name"],userId:n,adminMode:i,queries:{USER_LIST_QUERY:ce,ADMIN_LIST_QUERY:de,DELETE_MUTATION:oe}})})},ue=t(94),ve=t(41),be=function(e){var n=e.value,t=e.names,i=e.gql,r=e.item,s=n,l=t.length>1&&t[1],c=s.push&&s.reduce&&t.length>1?s.reduce((function(e,n){return e+", ".concat(n[l])}),"").substr(2):s,d=Object(a.useState)(c),o=Object(R.a)(d,2),m=o[0],u=o[1],v=Object(a.useState)([]),b=Object(R.a)(v,2),j=b[0],k=b[1];Object(C.a)(i.QUERY,{onCompleted:function(e){var n=Object.getOwnPropertyNames(e);if(n.length>0&&e[n[0]].length>0){var t=e[n[0]].map((function(e){return{id:e.id,checked:-1!==m.indexOf(e[l]),label:e[l]}}));k(t)}else k([])}});var h=Object(P.a)(i.ADD,{errorPolicy:"none"}),p=Object(R.a)(h,1)[0],g=Object(P.a)(i.REMOVE,{errorPolicy:"none"}),x=Object(R.a)(g,1)[0];return Object(f.jsx)(H.a,{id:"dropdown-basic-button",title:m,children:j&&j.map((function(e){return Object(f.jsx)(O.a.Item,{onClick:function(n){return function(e){var n=j.map((function(n){return n.label===e.label&&(n.checked=!n.checked),Object(D.a)({},n)})),t=n.reduce((function(e,n){return n.checked?"".concat(e,", ").concat(n.label):e}),"").substr(1);e.checked?p({variables:{id1:e.id,id2:r.id}}):x({variables:{id1:e.id,id2:r.id}}),k(n),u(t)}(e)},children:Object(f.jsx)(F.a.Check,{type:"checkbox",label:e.label,checked:e.checked})})}))})},je={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FragmentAllUserAdmin"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserModel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"password"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"UserFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FragmentAllUserAdmin"},directives:[]}]}}]}}],loc:{start:0,end:256,source:{body:'fragment FragmentAllUserAdmin on UserModel {\r\n  id\r\n  email\r\n  password\r\n  roles {\r\n    id\r\n    name\r\n  }\r\n}\r\n#import "./fragment-all-user-admin.gql"\r\nquery allUser($filter: UserFilter) {\r\n  allUser(filter: $filter) {\r\n    ...FragmentAllUserAdmin\r\n  }\r\n}\r\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},ke={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allUserRole"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:64,source:{body:"query allUserRole {\r\n  allUserRole {\r\n    id\r\n    name\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},he={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addToRoleOnUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id1"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id2"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addTo_RoleOnUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"rolesUserRoleId"},value:{kind:"Variable",name:{kind:"Name",value:"id1"}}},{kind:"Argument",name:{kind:"Name",value:"rolesUserId"},value:{kind:"Variable",name:{kind:"Name",value:"id2"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rolesUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"usersUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:194,source:{body:"mutation addToRoleOnUser($id1: ID!, $id2: ID!) {\r\n  addTo_RoleOnUser(rolesUserRoleId: $id1, rolesUserId: $id2) {\r\n    rolesUserRole {\r\n      id\r\n    }\r\n    usersUser {\r\n      id\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeFromRoleOnUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id1"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id2"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeFrom_RoleOnUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"rolesUserRoleId"},value:{kind:"Variable",name:{kind:"Name",value:"id1"}}},{kind:"Argument",name:{kind:"Name",value:"rolesUserId"},value:{kind:"Variable",name:{kind:"Name",value:"id2"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rolesUserRole"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"usersUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:204,source:{body:"mutation removeFromRoleOnUser($id1: ID!, $id2: ID!) {\r\n  removeFrom_RoleOnUser(rolesUserRoleId: $id1, rolesUserId: $id2) {\r\n    rolesUserRole {\r\n      id\r\n    }\r\n    usersUser {\r\n      id\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:74,source:{body:"mutation removeUser($id: ID!) {\r\n  removeUser(id: $id) {\r\n    id\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ge=Object(ve.a)(i||(i=Object(ue.a)(["\n{allUser{id}}"]))),fe=function(e){var n=e.value,t=e.names,i=e.item,a={QUERY:ke,ADD:he,REMOVE:pe};return Object(f.jsx)(be,{value:n,names:t,gql:a,item:i})},xe=function(e){var n=e.userId,t=e.adminMode,i=void 0!==t&&t;return Object(f.jsx)("div",{children:Object(f.jsx)(le,{name:"Users",fields:["email","password",{name:"roles.name",component:fe},"roles.id"],userId:n,adminMode:i,queries:{USER_LIST_QUERY:ge,ADMIN_LIST_QUERY:je,DELETE_MUTATION:Oe}})})};t(163);var Ne,Se=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("h1",{children:"GraphQL Monster Demo"}),Object(f.jsx)("pre",{children:"user: test@graphql.monster password: test@graphql.monster"}),Object(f.jsx)(g.b,{to:"/todo",children:" Todo"}),Object(f.jsx)(g.b,{to:"/posts",children:" Posts (without photos)"}),Object(f.jsx)(g.b,{to:"/postsV2",children:" Posts V2 (with photos)"})]})})},ye=t(9),we=t.n(ye),De=t(11),Fe=t(60),Te=t.n(Fe),Ie=function(){var e,n;return null===(e="https://graphql.monster/client/60265a2cb6499e6be69b13b6/project/60d976d391e6c6769608b52c/graphql")?void 0:e.substr(0,(null===(n="https://graphql.monster/client/60265a2cb6499e6be69b13b6/project/60d976d391e6c6769608b52c/graphql")?void 0:n.length)-8)},Ue=function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)},Ve=function(e){var n=e.length;if(n<1)return{valid:!1,strong:0,name:"",variant:"danger"};if(n>=15)return{valid:!0,strong:100,name:"strong",variant:"success"};var t=/(?=.*[A-Z]){2,}/.test(e)?2:/(?=.*[A-Z])/.test(e)?1:0,i=/(?=.*[a-z]){2,}/.test(e)?2:/(?=.*[a-z])/.test(e)?1:0,a=/(?=.*[0-9]){2,}/.test(e)?2:/(?=.*[0-9])/.test(e)?1:0,r=t+i+a+(/(?=.*[!@#$%^&*]){2,}/.test(e)?2:/(?=.*[!@#$%^&*])/.test(e)?1:0),s=n>7&&i>0&&a>0||!1,l=r+n/4;return l>10&&(l=10),{valid:s,strong:10*l,name:r>6?"strong":r>4?"intermediate":s?"weak":"poor",variant:l>6?"success":s?"warning":"danger"}},Re={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPassword"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forgottenPassword_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:131,source:{body:"mutation forgottenPassword($email: String!) {\r\n    forgottenPassword_v1(email: $email) {\r\n        email\r\n        status\r\n    }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ce=function(){var e=Object(a.useState)(""),n=Object(R.a)(e,2),t=n[0],i=n[1],r=Object(a.useState)(!1),s=Object(R.a)(r,2),l=s[0],c=s[1],d=Object(a.useState)(!1),o=Object(R.a)(d,2),m=o[0],u=o[1],v=Object(P.a)(Re,{errorPolicy:"none"}),b=Object(R.a)(v,2),j=b[0],k=b[1],h=k.loading,p=k.data,O=function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!1),!t||!Ue(t)){e.next=15;break}return c(!1),e.prev=3,e.next=6,j({variables:{email:t}});case 6:u(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("onError",p),c(!0);case 13:e.next=16;break;case 15:c(!0);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return m?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(A.a,{variant:"success",children:["We sent to You instruction to email ",t,". Check your mailbox (don't forget check spam as well)"]})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(f.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(f.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(f.jsxs)("div",{className:"col-md-12 text-center",children:[Object(f.jsx)("h1",{children:"Forgotten Password"}),Object(f.jsx)("p",{children:"Shortly You will be back"})]}),Object(f.jsx)("div",{className:"clearfix"})]})})})})})}),Object(f.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(f.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(f.jsx)(F.a,{children:Object(f.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(f.jsx)(F.a.Label,{children:"Email address"}),Object(f.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){i(e.target.value),c(!1)},value:t,isInvalid:l}),Object(f.jsx)(F.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]})}),Object(f.jsxs)("div",{id:"submit",className:"pull-left",children:[!h&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",onClick:function(){return O()},children:"Send Recovery Link"}),h&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(f.jsx)("div",{className:"clearfix"})]})]})})})})})]})},Pe=t(51),Ee=t.n(Pe),Ae=t(208),Le=function(e){var n=e.onPasswordChange,t=e.password,i=e.strongPassword;return Object(f.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(f.jsx)(F.a.Label,{children:"Password"}),Object(f.jsx)(F.a.Control,{type:"password",placeholder:"Password",onChange:n,value:t,isInvalid:!i.valid}),Object(f.jsx)(F.a.Text,{children:"Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter"}),Object(f.jsx)(Ae.a,{now:i.strong,label:i.name,variant:i.variant})]})},$e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPasswordCheck"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"check"},name:{kind:"Name",value:"forgottenPasswordCheck_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:133,source:{body:"  mutation forgottenPasswordCheck($token: String!) {\r\n    check: forgottenPasswordCheck_v1(token: $token) {\r\n      status\r\n    }\r\n  }",name:"GraphQL request",locationOffset:{line:1,column:1}}}},qe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"forgottenPasswordReset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reset"},name:{kind:"Name",value:"forgottenPasswordReset_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:380,source:{body:'fragment loginRegisterFragment on UserToken {\r\n  token\r\n  refreshToken\r\n  user {\r\n    id\r\n    email\r\n    verified\r\n    roles {\r\n      name\r\n    }\r\n  }\r\n}\r\n#import "./login-register-fragment.gql"\r\n\r\nmutation forgottenPasswordReset($token: String!, $password: String!) {\r\n  reset: forgottenPasswordReset_v1(token: $token, password: $password) {\r\n    ...loginRegisterFragment\r\n  }\r\n}',name:"GraphQL request",locationOffset:{line:1,column:1}}}},_e=function(e){var n=e.match,t=Ee.a.get(n,"params.token"),i=Object(a.useState)(""),r=Object(R.a)(i,2),s=r[0],l=r[1],o=Object(a.useState)(""),m=Object(R.a)(o,2),u=m[0],v=m[1],b=Object(c.g)(),k=Object(d.b)(),p=Object(P.a)($e,{errorPolicy:"none"}),O=Object(R.a)(p,2),g=O[0],x=O[1],N=x.loading,S=x.data,y=Object(P.a)(qe,{errorPolicy:"none"}),w=Object(R.a)(y,2),D=w[0],I=w[1],U=I.loading,V=I.data,C=Object(a.useState)(!1)[1],E=Object(a.useState)(Ve("")),L=Object(R.a)(E,2),$=L[0],q=L[1],_=Object(a.useState)(!1),Q=Object(R.a)(_,2),G=Q[0],M=Q[1];Object(a.useEffect)((function(){(function(){var e=Object(De.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g({variables:{token:t}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}}),e,null,[[0,5,7,9]])})));return function(){return e.apply(this,arguments)}})()()}),[t,g]);var B=function(){var e=Object(De.a)(we.a.mark((function e(){var n,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($.valid){e.next=2;break}return e.abrupt("return");case 2:if(s===u){e.next=5;break}return M(!0),e.abrupt("return");case 5:return e.prev=5,k(h("processing")),e.next=9,D({variables:{token:t,password:s}});case 9:n=e.sent,i=n.data,k(j(i.reset)),b.replace("/user/projects"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("onError",V);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return N?Object(f.jsx)(A.a,{variant:"success",children:"Checking token"}):S&&S.check&&"valid"===S.check.status?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(f.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(f.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(f.jsxs)("div",{className:"col-md-12 text-center",children:[Object(f.jsx)("h1",{children:"User Password Reset"}),Object(f.jsx)("p",{children:"You will be back soon"})]}),Object(f.jsx)("div",{className:"clearfix"})]})})})})})}),Object(f.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(f.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(f.jsxs)(F.a,{children:[G&&Object(f.jsx)(A.a,{variant:"danger",children:"The retyped password is not the same"}),Object(f.jsx)(Le,{password:s,onPasswordChange:function(e){var n=e.target.value;l(n);var t=function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(e)}(n);C(!t),q(Ve(n))},strongPassword:$}),Object(f.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(f.jsx)(F.a.Label,{children:"Re-Password"}),Object(f.jsx)(F.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var n=e.target.value;v(n),C(!1),n===s&&M(!1)},value:u,isInvalid:G})]})]}),Object(f.jsxs)("div",{id:"submit",className:"pull-left",children:[!U&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",onClick:function(){return B()},disabled:!$.valid,children:"Reset password"}),U&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(f.jsx)("div",{className:"clearfix"})]})]})})})})})]}):Object(f.jsxs)(A.a,{variant:"danger",children:["The ",Object(f.jsx)("b",{children:t})," is not valid or already used"]})},Qe=function(){return Object(d.b)()},Ge=(d.c,function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)}),Me={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Login"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pass"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"pass"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:338,source:{body:'fragment loginRegisterFragment on UserToken {\r\n  token\r\n  refreshToken\r\n  user {\r\n    id\r\n    email\r\n    verified\r\n    roles {\r\n      name\r\n    }\r\n  }\r\n}\r\n#import "./login-register-fragment.gql"\r\n\r\n  mutation Login($email: String!, $pass: String!) {\r\n    login_v1(email: $email, password:$pass) {\r\n      ...loginRegisterFragment\r\n    }\r\n}',name:"GraphQL request",locationOffset:{line:1,column:1}}}},Be=function(){var e=Object(a.useState)(localStorage.getItem("user.email")||""),n=Object(R.a)(e,2),t=n[0],i=n[1],r=Object(a.useState)(""),s=Object(R.a)(r,2),l=s[0],d=s[1],o=Object(a.useState)(!1),m=Object(R.a)(o,2),u=m[0],v=m[1],b=Object(a.useState)(!1),k=Object(R.a)(b,2),p=k[0],O=k[1],x=Object(c.g)(),N=new URLSearchParams(x.location.search),S=N.get("path"),y=N.get("role"),w=Qe(),D=Object(P.a)(Me,{errorPolicy:"none"}),I=Object(R.a)(D,2),U=I[0],V=I[1].loading,C=function(){var e=Object(De.a)(we.a.mark((function e(){var n,i,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ge(t)){e.next=2;break}return e.abrupt("return",v(!0));case 2:return e.prev=2,w(h("processing")),e.next=6,U({variables:{email:t,pass:l}});case 6:n=e.sent,i=n.data,a=i.login_v1,w(j(a)),x.replace(S||"/user/dashboard"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),v(!0),O(!0),d("");case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){x.goBack()};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(f.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(f.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(f.jsxs)("div",{className:"col-md-12 text-center",children:[Object(f.jsx)("h1",{children:"User Login"}),Object(f.jsx)("pre",{children:"user: test@graphql.monster password: test@graphql.monster"}),Object(f.jsx)("p",{children:"We was missed you already"}),y&&Object(f.jsxs)(A.a,{variant:"warning",children:["You trying to reach part what is under registered user with ",Object(f.jsx)("b",{children:y})," role protection. ",Object(f.jsx)(g.b,{to:"/",onClick:E,children:"Please take me back"})]}),!y&&S&&Object(f.jsxs)(A.a,{variant:"warning",children:["You trying to reach part what is under registered user protection. ",Object(f.jsx)(g.b,{to:"/",onClick:E,children:"Please take me back"})]})]}),Object(f.jsx)("div",{className:"clearfix"})]})})})})})}),Object(f.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(f.jsxs)(F.a,{name:"contactForm",id:"contact_form",className:"form-border",children:[!p&&Object(f.jsx)("h3",{children:"Login to your account"}),p&&Object(f.jsxs)(A.a,{variant:"danger",children:["Email or password is not valid. Did You ",Object(f.jsx)(g.b,{to:"/forgotten-password",children:"forgotten your password"}),"?"]}),u&&Object(f.jsx)(A.a,{variant:"danger",children:"Email is not in good shape..."}),Object(f.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(f.jsx)(F.a.Label,{children:"Email address"}),Object(f.jsx)(F.a.Control,{type:"text",placeholder:"Enter email",onChange:function(e){i(e.target.value),v(!1),O(!1)},value:t,isInvalid:u})]}),Object(f.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(f.jsx)(F.a.Label,{children:"Password"}),Object(f.jsx)(F.a.Control,{type:"password",onChange:function(e){d(e.target.value),v(!1),O(!1)},value:l,isInvalid:p}),Object(f.jsx)(F.a.Text,{className:"text-muted",children:"We'll never share your password with anyone else."})]}),Object(f.jsxs)("div",{id:"submit",className:"pull-left",children:[!V&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",onClick:function(){return C()},children:"Login"}),V&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(f.jsx)("div",{className:"clearfix"}),Object(f.jsx)("div",{className:"spacer-single"}),Object(f.jsxs)("ul",{className:"list s3",children:[Object(f.jsx)("li",{children:"Or login with:"}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"".concat(Ie(),"/auth/github"),children:"GitHub"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"".concat(Ie(),"/auth/facebook"),children:"Facebook"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"".concat(Ie(),"/auth/google"),children:"Google"})})]})]})]})})})})})]})},ze=function(){var e=Object(De.a)(we.a.mark((function e(n,t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te.a.get("".concat(Ie(),"/auth/").concat(n,"/callback?code=").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ye=function(e){var n=e.type,t=Object(c.h)(),i=Ee.a.get(t,"search","").split("?code="),r=i.length>1?i[1]:"",s=Object(c.g)(),l=Qe(),d=Object(a.useState)(),o=Object(R.a)(d,2),m=o[0],u=o[1],v=function(e){u(e),setTimeout((function(){s.replace("/login")}),4e3)};return Object(a.useEffect)((function(){r?function(){var e=Object(De.a)(we.a.mark((function e(){var t,i,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze(n,r);case 3:t=e.sent,l(j(t)),s.replace("/user/projects"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=JSON.parse(Ee.a.get(e.t0,"request.response","{}")),v((null===(i=a.error)||void 0===i?void 0:i.message)||e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()():v("User denied")})),Object(f.jsx)(f.Fragment,{children:m&&Object(f.jsxs)(A.a,{variant:"danger",children:[n," login isn't work due \"",m,'" You will be redirect back to ',Object(f.jsx)(g.b,{to:"/login",children:"Login"})]})})},He={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"loginRegisterFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserToken"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"refreshToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"register"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pass"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"register_v1"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"password"},value:{kind:"Variable",name:{kind:"Name",value:"pass"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"loginRegisterFragment"},directives:[]}]}}]}}],loc:{start:0,end:345,source:{body:'fragment loginRegisterFragment on UserToken {\r\n  token\r\n  refreshToken\r\n  user {\r\n    id\r\n    email\r\n    verified\r\n    roles {\r\n      name\r\n    }\r\n  }\r\n}\r\n#import "./login-register-fragment.gql"\r\n\r\nmutation register($email: String!, $pass: String!) {\r\n    register_v1(email: $email, password: $pass) {\r\n      ...loginRegisterFragment\r\n    }\r\n  }',name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ke=function(){var e=Object(a.useState)(""),n=Object(R.a)(e,2),t=n[0],i=n[1],r=Object(a.useState)(""),s=Object(R.a)(r,2),l=s[0],d=s[1],o=Object(a.useState)(""),m=Object(R.a)(o,2),u=m[0],v=m[1],b=Object(c.g)(),k=Qe(),p=Object(P.a)(He,{errorPolicy:"none"}),O=Object(R.a)(p,2),x=O[0],N=O[1],S=N.loading,y=N.data,w=Object(a.useState)(!1),D=Object(R.a)(w,2),I=D[0],U=D[1],V=Object(a.useState)(!1),C=Object(R.a)(V,2),E=C[0],L=C[1],$=Object(a.useState)(Ve("")),q=Object(R.a)($,2),_=q[0],Q=q[1],G=Object(a.useState)(!1),M=Object(R.a)(G,2),B=M[0],z=M[1],Y=function(){var e=Object(De.a)(we.a.mark((function e(){var n,i,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue(t)){e.next=2;break}return e.abrupt("return",U(!0));case 2:if(l===u){e.next=5;break}return z(!0),e.abrupt("return");case 5:return e.prev=5,k(h("processing")),e.next=9,x({variables:{email:t,pass:l}});case 9:n=e.sent,i=n.data,a=i.register_v1,k(j(a)),b.replace("/user/dashboard"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("onError",y),L(!0);case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(f.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(f.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(f.jsxs)("div",{className:"col-md-12 text-center",children:[Object(f.jsx)("h1",{children:"User Registration"}),Object(f.jsx)("p",{children:"All big things starting here"})]}),Object(f.jsx)("div",{className:"clearfix"})]})})})})})}),Object(f.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(f.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(f.jsxs)(F.a,{children:[I&&Object(f.jsx)(A.a,{variant:"danger",children:"Email is not in good shape..."}),E&&Object(f.jsxs)(A.a,{variant:"danger",children:["Email is probably taken, did you ",Object(f.jsx)(g.b,{to:"/forgotten-password",children:"forgotten password"}),"?"]}),B&&Object(f.jsx)(A.a,{variant:"danger",children:"The retyped password is not the same"}),Object(f.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(f.jsx)(F.a.Label,{children:"Email address"}),Object(f.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){i(e.target.value),U(!1),L(!1)},value:t,isInvalid:I}),Object(f.jsx)(F.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(f.jsx)(Le,{password:l,onPasswordChange:function(e){var n=e.target.value;d(n),U(!1),Q(Ve(n))},strongPassword:_}),Object(f.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(f.jsx)(F.a.Label,{children:"Re-Password"}),Object(f.jsx)(F.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var n=e.target.value;v(n),U(!1),n===l&&z(!1)},value:u,isInvalid:B})]})]}),Object(f.jsxs)("div",{id:"submit",className:"pull-left",children:[!S&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",onClick:function(){return Y()},children:"Register"}),S&&Object(f.jsx)(T.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(f.jsx)("div",{className:"clearfix"}),Object(f.jsx)("div",{className:"spacer-single"})]})]})})})})})]})},We=Object(ve.a)(Ne||(Ne=Object(ue.a)(["\n  mutation verifyEmail($verifyToken: String!) {\n    verifyEmail_v1(verifyToken: $verifyToken) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n"]))),Je=function(e){var n=e.match,t=Pe.get(n,"params.verifyToken"),i=Object(a.useState)(!1),r=Object(R.a)(i,2),s=r[0],l=r[1],o=Object(c.g)(),m=Object(d.b)(),u=Object(P.a)(We,{errorPolicy:"none"}),v=Object(R.a)(u,2),b=v[0],k=v[1],h=k.loading,p=k.data,O=k.error,g=function(){var e=Object(De.a)(we.a.mark((function e(){var n,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({variables:{verifyToken:t}});case 3:n=e.sent,i=n.data,m(j(i.verifyEmail_v1)),l(!0),localStorage.setItem("user.verifyToken",t),setTimeout((function(){o.replace("/user/projects")}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("onError",p);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&function(){var e=localStorage.getItem("user.verifyToken");"true"===localStorage.getItem("user.verified")&&e===t?o.replace("/user/projects"):g()}()})),Object(f.jsx)("section",{children:Object(f.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"col-md-8 offset-md-2",children:[s?Object(f.jsxs)("div",{className:"alert alert-success",role:"alert",children:["Your account was verified ",Object(f.jsx)(T.a,{children:"Start creating"})]}):null,h?Object(f.jsx)("div",{className:"alert alert-dark",role:"alert",children:"Your accont is verifing..."}):null,!t||O?Object(f.jsx)("div",{className:"alert alert-dark",role:"alert",children:"The code is invalid or already applyed"}):null]})})})})})},Ze=(t(183),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreatePost"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"text"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"color"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"text"},value:{kind:"Variable",name:{kind:"Name",value:"text"}}},{kind:"Argument",name:{kind:"Name",value:"color"},value:{kind:"Variable",name:{kind:"Name",value:"color"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:150,source:{body:"\n    mutation CreatePost($text: String!, $color: String) {\n    createPost(text: $text, color: $color) {\n        id\n        text,\n        color\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}}),Xe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"EnumValue",value:"createdAt_desc"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:77,source:{body:"{\n  allPost(orderBy: createdAt_desc){\n      id,\n      text,\n      color\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},en=function(){var e,n=Object(a.useState)(""),t=Object(R.a)(n,2),i=t[0],r=t[1],s=Object(a.useState)("#28a745"),l=Object(R.a)(s,2),c=l[0],d=l[1],o=Object(P.a)(Ze),m=Object(R.a)(o,2),u=m[0],v=m[1].error,b=Object(C.a)(Xe),j=b.data,k=b.loading,h=b.error,p=b.refetch,O=function(){var e=Object(De.a)(we.a.mark((function e(){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),n={text:i,color:c},e.next=4,u({variables:n});case 4:return e.next=6,p();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k?Object(f.jsx)(E,{}):Object(f.jsxs)("div",{className:"postsPage",children:[v&&Object(f.jsxs)(A.a,{variant:"danger",children:["Add post: ",v.message]}),h&&Object(f.jsxs)(A.a,{variant:"danger",children:["Loading: ",h.message]}),Object(f.jsxs)(F.a.Group,{controlId:"exampleForm.ControlSelect2",children:[Object(f.jsx)(F.a.Label,{children:Object(f.jsx)("table",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("div",{className:"colorPicker",children:Object(f.jsx)(F.a.Control,{type:"color",id:"exampleColorInput",defaultValue:c,title:"Choose your color",onChange:function(e){d(e.target.value)}})})}),Object(f.jsx)("td",{children:"Create Post V1 (without photos)"})]})})}),Object(f.jsx)(F.a.Control,{as:"textarea",rows:5,value:i,onChange:function(e){r(e.target.value)}})]}),Object(f.jsx)(T.a,{onClick:O,variant:"success",children:"Post Now"}),Object(f.jsx)("hr",{}),Object(f.jsx)("h4",{children:"Posts"}),null===j||void 0===j||null===(e=j.allPost)||void 0===e?void 0:e.map((function(e,n){return Object(f.jsx)("div",{className:"post",children:Object(f.jsx)("div",{className:"hightligtedText",style:{backgroundColor:e.color},children:e.text})},n)})),Object(f.jsx)("a",{href:"https://github.com/miuan/graphql-monster-demo/blob/main/src/pages/user/Posts/Posts.tsx",target:"_blank",rel:"noreferrer",children:"Source code"})]})},nn=t(20),tn=t(211),an=function(e){var n=e.publicKey,t=e.width||"100px",i=e.height||"100px";return Object(f.jsx)("div",{style:{overflow:"hidden",width:t,height:i},children:Object(f.jsx)("img",{alt:"",style:{objectFit:"cover",width:"100%",minHeight:"100%"},src:"".concat(Ie(),"/download/").concat(n)})})},rn=(t(184),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreatePost"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"text"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"color"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"imagesIds"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createPost_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"text"},value:{kind:"Variable",name:{kind:"Name",value:"text"}}},{kind:"Argument",name:{kind:"Name",value:"color"},value:{kind:"Variable",name:{kind:"Name",value:"color"}}},{kind:"Argument",name:{kind:"Name",value:"imagesIds"},value:{kind:"Variable",name:{kind:"Name",value:"imagesIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publicKey"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:227,source:{body:"mutation CreatePost($text: String!, $color: String, $imagesIds: [ID]) {\r\n    createPost_v2(text: $text, color: $color, imagesIds: $imagesIds) {\r\n        id\r\n        text,\r\n        color,\r\n        images{id, publicKey}\r\n    }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}}),sn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allPost_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"EnumValue",value:"createdAt_desc"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publicKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:148,source:{body:"{\r\n    allPost_v2(orderBy: createdAt_desc){\r\n        id,\r\n        text,\r\n        color,\r\n        images{publicKey,id}\r\n        user{email}\r\n    }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ln={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemovePost"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removePost_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:83,source:{body:"mutation RemovePost($id: ID!) {\r\n    removePost_v2(id: $id) {\r\n        id\r\n    }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},cn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeFile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:81,source:{body:"mutation RemoveImage($id: ID!) {\r\n    removeFile(id: $id) {\r\n        id\r\n    }\r\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},dn=function(){return function(){var e=Object(De.a)(we.a.mark((function e(n){var t,i,a,r=arguments;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:void 0,i=localStorage.getItem("user.token"),(a=new FormData).append("file",n),e.abrupt("return",new Promise(function(){var e=Object(De.a)(we.a.mark((function e(n,r){var s,l,c,d,o,m;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.a.post("".concat(Ie(),"/upload"),a,{headers:{Authorization:"Bearer ".concat(i)}});case 3:s=e.sent,t&&t(null,s.data),n(s.data),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),o=e.t0,(null===(l=e.t0.response)||void 0===l||null===(c=l.data)||void 0===c||null===(d=c.error)||void 0===d?void 0:d.message)&&(o=null===(m=e.t0.response)||void 0===m?void 0:m.data.error),"Network Error"===o.message&&(o.message="File is too large (max file size is 1Mb)"),t&&t(o,null),r(o);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}("files"),on=function(e){var n=e.text,t=e.color;return e.hasImages||(null===n||void 0===n?void 0:n.length)>100?Object(f.jsx)("p",{children:n}):Object(f.jsx)("div",{className:"hightligtedText",style:{backgroundColor:t},children:n})},mn=function(e){var n=e.images;return Object(f.jsx)(tn.a,{children:n.map((function(e){return Object(f.jsxs)(tn.a.Item,{children:[Object(f.jsx)(an,{publicKey:e.publicKey,width:"800px",height:"600px"}),Object(f.jsxs)(tn.a.Caption,{children:[Object(f.jsx)("h3",{children:"First slide label"}),Object(f.jsx)("p",{children:"Nulla vitae elit libero, a pharetra augue mollis interdum."})]})]})}))})},un=function(e){var n=e.src,t=e.width||"100px",i=e.height||"100px";return Object(f.jsx)("div",{style:{overflow:"hidden",width:t,height:i},children:Object(f.jsx)("img",{alt:"",style:{objectFit:"cover",width:"100%",minHeight:"100%"},src:n})})},vn=function(){var e,n=Object(a.useState)(""),t=Object(R.a)(n,2),i=t[0],r=t[1],s=Object(a.useState)("#28a745"),l=Object(R.a)(s,2),c=l[0],d=l[1],o=Object(a.useState)(),m=Object(R.a)(o,2),u=m[0],v=m[1],b=Object(P.a)(rn),j=Object(R.a)(b,2),k=j[0],h=j[1].error,p=Object(C.a)(sn),O=p.data,g=p.loading,x=p.error,N=p.refetch,S=Object(P.a)(ln),y=Object(R.a)(S,2),w=y[0],D=y[1].error,I=Object(P.a)(cn),U=Object(R.a)(I,2),V=U[0],L=(U[1].error,Object(a.useState)()),$=Object(R.a)(L,2),q=$[0],_=($[1],Object(a.useState)([])),Q=Object(R.a)(_,2),G=Q[0],M=Q[1],B=function(){var e=Object(De.a)(we.a.mark((function e(){var n,t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(""),n={text:i,color:c},!(G&&G.length>0)){e.next=7;break}return e.next=5,Promise.all(G.map((function(e){return dn(e.file)})));case 5:t=e.sent,n.imagesIds=t.map((function(e){return e.id}));case 7:return e.next=9,k({variables:n});case 9:M([]),N();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(De.a)(we.a.mark((function e(n){var t,i,a,r;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.id,a=null===O||void 0===O?void 0:O.allPost_v2.find((function(e){return e.id===i})),e.next=4,w({variables:{id:i}});case 4:if(!((null===a||void 0===a||null===(t=a.images)||void 0===t?void 0:t.length)>0)){e.next=8;break}return r=null===a||void 0===a?void 0:a.images.map((function(e){return V({variables:{id:e.id}})})),e.next=8,Promise.all(r);case 8:v(void 0),N();case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return g?Object(f.jsx)(E,{}):Object(f.jsxs)("div",{className:"postsPage",children:[h&&Object(f.jsxs)(A.a,{variant:"danger",children:["Add post: ",h.message]}),D&&Object(f.jsxs)(A.a,{variant:"danger",children:["Remove post: ",D.message]}),x&&Object(f.jsxs)(A.a,{variant:"danger",children:["Loading: ",x.message]}),q&&Object(f.jsxs)(A.a,{variant:"danger",children:["Upload: ",q.message]}),Object(f.jsxs)(F.a.Group,{controlId:"exampleForm.ControlSelect2",children:[Object(f.jsx)(F.a.Label,{children:Object(f.jsx)("table",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{}),Object(f.jsx)("td",{children:Object(f.jsx)("div",{className:"colorPicker",children:Object(f.jsx)(F.a.Control,{type:"color",id:"exampleColorInput",defaultValue:c,title:"Choose your color",onChange:function(e){d(e.target.value)}})})}),Object(f.jsxs)("td",{children:[Object(f.jsx)("label",{className:"photoButton",htmlFor:"uploadImage",children:Object(f.jsx)("div",{children:"Add photo"})}),Object(f.jsx)("input",{type:"file",id:"uploadImage",onChange:function(e){var n,t=e.target;if((null===t||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0){var i=Array.from(null===t||void 0===t?void 0:t.files).map((function(e){return{preview:URL.createObjectURL(e),file:e}}));M([].concat(Object(nn.a)(G),Object(nn.a)(i)))}},style:{display:"none"},multiple:!0})]}),Object(f.jsx)("td",{children:"Post V2 with photos"})]})})}),Object(f.jsx)(F.a.Control,{as:"textarea",rows:5,value:i,onChange:function(e){r(e.target.value)}}),G&&G.length>0&&Object(f.jsx)("div",{className:"imagePreviews",children:Object(f.jsx)("table",{children:Object(f.jsx)("tr",{children:G&&G.map((function(e){return Object(f.jsx)("td",{children:Object(f.jsxs)("div",{className:"removePreview",children:[Object(f.jsx)(un,{src:e.preview}),Object(f.jsx)("span",{onClick:function(){!function(e){console.log(e),M(G.filter((function(n){return n.preview!==e.preview})))}(e)},"aria-hidden":"true",children:"x"})]})})}))})})})]}),Object(f.jsx)(T.a,{onClick:B,variant:"success",children:"Post Now"}),Object(f.jsx)("div",{}),Object(f.jsx)("hr",{}),Object(f.jsx)("h4",{children:"Posts"}),null===O||void 0===O||null===(e=O.allPost_v2)||void 0===e?void 0:e.map((function(e,n){var t,i;return Object(f.jsxs)("div",{className:"post",children:[Object(f.jsx)("h5",{children:null===(t=e.user)||void 0===t?void 0:t.email}),Object(f.jsx)(on,{text:e.text,color:e.color,hasImages:!!(null===(i=e.images)||void 0===i?void 0:i.length)}),Object(f.jsx)(mn,{images:e.images}),Object(f.jsx)("div",{onClick:function(){var n;n=e.id,v(n)},"aria-hidden":"true",children:"Remove"})]},n)})),Object(f.jsx)("a",{href:"https://github.com/miuan/graphql-monster-demo/blob/main/src/pages/user/PostsV2/PostsV2.tsx",target:"_blank",children:"Source code"}),Object(f.jsx)(X,{show:!!u,modelName:"Posts",onDelete:z,onHide:function(){v(void 0)},deleteObject:{id:u}})]})},bn=(t(185),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"allTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NamedType",name:{kind:"Name",value:"TodoFilter"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:116,source:{body:"\nquery allTodo($filter: TodoFilter) {\n    allTodo(filter: $filter) {\n      id\n      title,\n      completed\n    }\n  }",name:"GraphQL request",locationOffset:{line:1,column:1}}}}),jn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"completed"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"completed"},value:{kind:"Variable",name:{kind:"Name",value:"completed"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:170,source:{body:"\n    mutation CreateTodo($title: String!, $completed:Boolean) {\n    createTodo(title: $title, completed: $completed) {\n        id\n        title,\n        completed\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},kn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"completed"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"completed"},value:{kind:"Variable",name:{kind:"Name",value:"completed"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:158,source:{body:"\n    mutation UpdateTodo($id: ID!, $completed: Boolean) {\n    updateTodo(id: $id, completed: $completed) {\n        id\n        title,\n        completed\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}},hn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveTodo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeTodo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:81,source:{body:"\n    mutation RemoveTodo($id: ID!) {\n    removeTodo(id: $id) {\n        id\n    }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function pn(){var e=Object(d.c)(v)||{id:null},n=Object(a.useState)(0),t=Object(R.a)(n,2),i=t[0],r=t[1],s=Object(a.useState)([]),l=Object(R.a)(s,2),c=l[0],o=l[1],m=Object(a.useState)(null),u=Object(R.a)(m,2),b=u[0],j=u[1],k=Object(C.a)(bn,{onCompleted:function(e){var n;o((null===e||void 0===e||null===(n=e.allTodo)||void 0===n?void 0:n.map((function(e){return Object(D.a)({},e)})))||[])},skip:!e.id,variables:{filter:{user_every:{id:e.id}}}}),h=(k.data,k.loading),p=Object(P.a)(jn),O=Object(R.a)(p,2),g=O[0],x=(O[1].error,Object(P.a)(kn)),N=Object(R.a)(x,2),S=N[0],y=(N[1].error,Object(P.a)(hn)),w=Object(R.a)(y,2),F=w[0];w[1].error;Object(a.useEffect)((function(){r(c.filter((function(e){return!e.completed})).length)}),[c]);var T=function(){var e=Object(De.a)(we.a.mark((function e(n){var t,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({variables:{title:n,completed:!1}});case 2:t=e.sent,console.log("createdData",t),i=[].concat(Object(nn.a)(c),[t.data.createTodo]),o(i);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=function(e){S({variables:{id:c[e].id,completed:!0}});var n=Object(nn.a)(c);n[e].completed=!0,o(n)},U=Object(a.useCallback)((function(e){j({id:c[e].id,name:c[e].title,index:e})}),[c]),V=Object(a.useCallback)((function(){if(null!=b){var e=Object(nn.a)(c);e.splice(b.index,1),o(e),j(null),F({variables:{id:c[b.index].id}})}}),[c,b]);return h?Object(f.jsx)(E,{}):Object(f.jsxs)("div",{className:"todo-container",children:[Object(f.jsx)("h1",{children:"Tasks"}),Object(f.jsx)("div",{className:"tasks",children:c.map((function(e,n){return Object(f.jsx)(gn,{task:e,index:n,completeTask:I,removeTask:U},n)}))}),Object(f.jsxs)("div",{className:"create-task",children:[Object(f.jsx)(On,{addTask:T}),Object(f.jsxs)("div",{className:"header",children:["Pending tasks (",i,")"]})]}),Object(f.jsx)(X,{show:!!b,deleteObject:b,modelName:"Todo",onHide:function(){return j(null)},onDelete:V})]})}function On(e){var n=e.addTask,t=Object(a.useState)(""),i=Object(R.a)(t,2),r=i[0],s=i[1];return Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),r&&(n(r),s(""))},children:Object(f.jsx)("input",{type:"text",className:"input",value:r,placeholder:"Add a new task",onChange:function(e){return s(e.target.value)}})})}function gn(e){var n=e.task,t=e.index,i=e.completeTask,a=e.removeTask;return Object(f.jsxs)("div",{className:"task",style:{textDecoration:n.completed?"line-through":""},children:[Object(f.jsx)("div",{children:Object(f.jsx)(T.a,{variant:"danger",size:"sm",onClick:function(){return a(t)},children:"x"})}),Object(f.jsx)("div",{className:"title",children:n.title}),Object(f.jsx)("div",{className:"right",children:Object(f.jsx)(T.a,{onClick:function(){return i(t)},children:"Complete"})})]})}var fn=function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"User Dashboard"})})};function xn(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(y,{}),Object(f.jsxs)(c.d,{children:[Object(f.jsx)(w,{path:"/todo",children:Object(f.jsx)(pn,{})}),Object(f.jsx)(w,{exact:!0,path:"/posts",children:Object(f.jsx)(en,{})}),Object(f.jsx)(w,{exact:!0,path:"/postsV2",children:Object(f.jsx)(vn,{})}),Object(f.jsx)(c.b,{exact:!0,path:"/",children:Object(f.jsx)(Se,{})}),Object(f.jsx)(c.b,{exact:!0,path:"/login",children:Object(f.jsx)(Be,{})}),Object(f.jsx)(c.b,{path:"/login/facebook",children:Object(f.jsx)(Ye,{type:"facebook"})}),Object(f.jsx)(c.b,{path:"/login/github",children:Object(f.jsx)(Ye,{type:"github"})}),Object(f.jsx)(c.b,{path:"/login/google",children:Object(f.jsx)(Ye,{type:"google"})}),Object(f.jsx)(c.b,{path:"/register",children:Object(f.jsx)(Ke,{})}),Object(f.jsx)(c.b,{path:"/forgotten-password/:token",component:_e}),Object(f.jsx)(c.b,{exact:!0,path:"/forgotten-password",children:Object(f.jsx)(Ce,{})}),Object(f.jsx)(c.b,{path:"/verify-user/:verifyToken",component:Je}),Object(f.jsx)(w,{path:"/user/dashboard",children:Object(f.jsx)(fn,{})}),Object(f.jsx)(c.b,{path:"/user/info"}),Object(f.jsx)(w,{path:"/admin/users",role:"admin",children:Object(f.jsx)(xe,{adminMode:!0})}),Object(f.jsx)(w,{path:"/admin/roles",role:"admin",children:Object(f.jsx)(me,{adminMode:!0})}),Object(f.jsx)(w,{path:"/user/roles/:id",role:"admin",children:Object(f.jsx)(B,{})})]})]})}var Nn=Object(o.a)({reducer:{user:p}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Sn=t(187),yn=t(186),wn=t(133),Dn=t(104),Fn=t(31),Tn=t(189),In=t(131),Un=t(132),Vn=function(){var e=Object(De.a)(we.a.mark((function e(){var n,t,i;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("user.id"),t=localStorage.getItem("user.token"),i=localStorage.getItem("user.refreshToken"),e.abrupt("return",Te.a.post("https://graphql.monster/client/60265a2cb6499e6be69b13b6/project/60d976d391e6c6769608b52c/graphql",{query:"\n            mutation refreshToken($userId: ID!, $token: String!, $refreshToken:String!){\n                refreshToken_v1(userId: $userId, token: $token, refreshToken:$refreshToken){\n                    token,\n                    refreshToken\n                }\n            }\n        ",variables:{userId:n,token:t,refreshToken:i}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rn=new(t(213).a)({attempts:function(e,n,t){return!0},delay:function(e,n,t){return 1e3*e*Math.random()}}),Cn=!1,Pn=[],En=function(e,n){var t;return Cn?t=Object(yn.a)(new Promise((function(e){Pn.push((function(){return e()}))}))):(Cn=!0,t=Object(yn.a)(Vn().then((function(t){var i=t.data.data.refreshToken_v1;localStorage.setItem("user.token",i.token),localStorage.setItem("user.refreshToken",i.refreshToken),Pn.map((function(e){return e()})),Pn=[];var a=n.getContext().headers;return n.setContext({headers:Object(D.a)(Object(D.a)({},a),{},{authorization:"Bearer ".concat(i.token)})}),e(n)})).catch((function(e){Pn=[]})).finally((function(){Cn=!1}))).filter((function(e){return Boolean(e)}))),t.flatMap((function(){return e(n)}))},An=Object(In.a)((function(e,n){var t=n.headers,i=localStorage.getItem("user.token");return{headers:Object(D.a)(Object(D.a)({},t),{},{authorization:i?"Bearer ".concat(i):""})}})),Ln=Object(wn.a)({uri:"https://graphql.monster/client/60265a2cb6499e6be69b13b6/project/60d976d391e6c6769608b52c/graphql"}),$n=Object(Un.a)((function(e){var n=e.graphQLErrors,t=e.networkError,i=e.operation,a=e.forward;if(n){if(n.some((function(e){return e.tokenExpired})))return En(a,i);n.map((function(e){var n=e.message,t=e.locations,i=e.path;return console.log("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(i))}))}t&&console.log("[Network error]: ".concat(t))})),qn=new Dn.a({link:Fn.ApolloLink.from([Rn,$n,An,Ln]),cache:new Tn.a,defaultOptions:{watchQuery:{errorPolicy:"none"},query:{errorPolicy:"none"},mutate:{errorPolicy:"all"}}});l.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(d.a,{store:Nn,children:Object(f.jsx)(Sn.a,{client:qn,children:Object(f.jsx)(g.a,{basename:"/",children:Object(f.jsx)(xn,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.f3c645c5.chunk.js.map